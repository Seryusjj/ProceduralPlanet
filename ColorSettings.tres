[gd_resource type="Resource" load_steps=6 format=2]

[ext_resource path="res://ColorSettings.cs" type="Script" id=1]
[ext_resource path="res://PlanetColorGradient.tres" type="Gradient" id=2]

[sub_resource type="Shader" id=1]
code = "shader_type spatial;

uniform vec2 elevation;
uniform vec3 center;
uniform sampler2D gradient;

varying float point_length;


// give me a value between start and end base on t -> [0, 1]
//t=0 gives me start, t=1 gives me end
float lerp(float start, float end, float t) {
	return start * (1.0 - t) + end * t;
}

//give me a valaue between 0 and 1 base on start and end
float inverse_lerp(float start, float end, float t) {
	if (end - start < 0.0) {
		return start;
	}
	return (t - start) / (end - start);
}

void vertex() {
	// distance from vertex to center obj
	point_length = distance(VERTEX, center);	
	//point_length = length(VERTEX);
}

void fragment() {	
	//x = min; y = max
	float r = inverse_lerp(elevation.x, elevation.y, point_length);
    //ALBEDO = vec3(r,r,r); // use red for material albedo

	//float2 uv = gradient.;
	vec4 sample = texture (gradient , vec2(r,r));
	ALBEDO = sample.xyz; // use red for material albedo
}

"

[sub_resource type="GradientTexture" id=2]
gradient = ExtResource( 2 )
width = 50

[sub_resource type="ShaderMaterial" id=3]
shader = SubResource( 1 )
shader_param/elevation = Vector2( 1, 1.12599 )
shader_param/center = Vector3( 0, 0, 0 )
shader_param/gradient = SubResource( 2 )

[resource]
script = ExtResource( 1 )
PlanetColour = ExtResource( 2 )
PlanetMaterial = SubResource( 3 )
